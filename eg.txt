cursor.execute("INSERT INTO Teachers (Firstname, Surname, Gender, Email, Role) VALUES ('David', 'Akeredolu', 'M', 'akeredolud@mercia.school', 'A')")
cursor.execute("INSERT INTO Teachers (Firstname, Surname, Gender, Email, Role) VALUES ('Carly', 'Perzl', 'F', 'perzlc@mercia.school', 'T')")
cursor.execute("INSERT INTO Teachers (Firstname, Surname, Gender, Email, Role) VALUES ('Joshua', 'Curran', 'M', 'curranj@mercia.school', 'T')")
cursor.execute("INSERT INTO Subjects (Subjectname) VALUES ('Admin')")
cursor.execute("INSERT INTO Subjects (Subjectname) VALUES ('Mathematics')")
cursor.execute("INSERT INTO Subjects (Subjectname) VALUES ('English')")
cursor.execute("INSERT INTO Subjects (Subjectname) VALUES ('Science')")
cursor.execute("INSERT INTO Subjects (Subjectname) VALUES ('Computing')")
cursor.execute("INSERT INTO Subjects (Subjectname) VALUES ('History')")







        query = request.args.get('query', '').strip()
        
        if role == "A":
            if query:
                search_param = f"%{query}%"
                cursor.execute("""SELECT * FROM Students WHERE 
                               StudentID LIKE ? OR Firstname LIKE ? OR Surname LIKE ? 
                               OR Email LIKE ? OR Mastery LIKE ?""", 
                               (search_param, search_param, search_param, search_param, search_param))
            else:
                cursor.execute("SELECT * FROM Students")
            students = cursor.fetchall()
            cursor.execute("SELECT * FROM Student_info")
            extra_info = cursor.fetchall()
            return render_template("admin_students.html", students=students, info=extra_info, query=query) 
        else:
            if query:
                search_param = f"%{query}%"
                cursor.execute("""SELECT * FROM Students WHERE 
                               StudentID LIKE ? OR Firstname LIKE ? OR Surname LIKE ? 
                               OR Email LIKE ? OR Mastery LIKE ?""", 
                               (search_param, search_param, search_param, search_param, search_param))
            else:
                cursor.execute("SELECT * FROM Students")
            students = cursor.fetchall()
            cursor.execute("SELECT * FROM Student_Info")
            extra_info = cursor.fetchall()
            return render_template("students.html", students=students, info=extra_info, query=query)
    else:
        return redirect(url_for('login'))








